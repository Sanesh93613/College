/* 
 * Скетч для приёмника
 */

#include <SoftwareSerial.h>                      // * Подключаем библиотеку программного последовательного порта
#define RX 8                                     // * Определяем вывод TX программного последовательного порта
#define TX 9                                     // * Определяем вывод RX программного последовательного порта
                                                 //
SoftwareSerial Serial1(RX,TX);                   // * Создаём программный последовательный порт
                                                 //                    
byte data[5];                                    // Объявляем массив для приёма и хранения данных 
                                                 //  
void setup() {                                   //
  Serial1.begin(9600);                           // Инициируем программный последовательный порт на скорости 9600 бод
}                                                // 
                                                 //
void loop() {                                    //
// Если в буфере порта есть данные и прочитанный байт равен заголовку пакета
  if (Serial1.available() && Serial1.read() == 0xAA){
    // Читаем строку из последовательного порта и конвертируем её в массив байт data    
    Serial1.readStringUntil('\n').toCharArray(data, sizeof(data));                          
    digitalWrite(LED_BUILTIN, data[0]);          // Включаем или выключаем встроенный светодиод, в зависимости от полученных данных
  }                                              //
}                                                //